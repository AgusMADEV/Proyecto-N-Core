<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>N-Core | Dashboard</title>
  <link rel="icon" type="image/png" href="https://static.agusmadev.es/logos/logo-morado-blanco.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-- HEADER -->
<header>
  <div class="brand">
    <div class="brand-logo" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
      </svg>
    </div>
    <div class="brand-text">
      <span class="brand-name">N-Core</span>
      <span class="brand-sub">Procesamiento Multinucleo</span>
    </div>
    <span class="version-badge">v4.0</span>
  </div>

  <div class="header-right">
    <span id="stateBadge" class="state-badge idle">
      <span class="badge-dot"></span>
      <span class="badge-text">Inactivo</span>
    </span>
    <div class="conn-indicator">
      <span class="conn-dot" id="connDot"></span>
      <span id="connLabel">Desconectado</span>
    </div>
  </div>
</header>

<!-- LAYOUT -->
<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">

    <div class="panel">
      <div class="panel-title">
        <svg class="panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
        Sistema
      </div>
      <div class="sys-info">
        <div class="sys-row">
          <span class="sys-key">Nucleos</span>
          <span class="sys-val" id="sysCores">&#8212;</span>
        </div>
        <div class="sys-row">
          <span class="sys-key">Pillow</span>
          <span class="sys-val" id="sysPillow">&#8212;</span>
        </div>
        <div class="sys-row">
          <span class="sys-key">psutil</span>
          <span class="sys-val" id="sysPsutil">&#8212;</span>
        </div>
        <div class="sys-divider"></div>
        <div class="sys-row sys-metric">
          <span class="sys-key">CPU Total</span>
          <span class="sys-val accent-blue" id="cpuTotal">0%</span>
        </div>
        <div class="mini-bar-track">
          <div class="mini-bar-fill blue" id="cpuTotalBar" style="width:0%"></div>
        </div>
        <div class="sys-row sys-metric" style="margin-top:10px">
          <span class="sys-key">RAM</span>
          <span class="sys-val accent-purple" id="ramInfo">&#8212;</span>
        </div>
        <div class="mini-bar-track">
          <div class="mini-bar-fill purple" id="ramBar" style="width:0%"></div>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="panel-title">
        <svg class="panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.07 4.93a10 10 0 010 14.14M4.93 4.93a10 10 0 000 14.14"/></svg>
        Configuracion
      </div>

      <div class="control-group">
        <label class="control-label">Workers (procesos paralelos)</label>
        <div class="worker-row">
          <input type="range" id="workerSlider" min="1" max="16" value="4" />
          <span class="worker-val" id="workerVal">4</span>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label">Tamano de redimension</label>
        <select id="resizeSelect">
          <option value="320x240">Pequeno &#8212; 320 x 240</option>
          <option value="640x480">Mediano &#8212; 640 x 480</option>
          <option value="800x600" selected>Estandar &#8212; 800 x 600</option>
          <option value="1280x720">HD &#8212; 1280 x 720</option>
          <option value="1920x1080">Full HD &#8212; 1920 x 1080</option>
        </select>
      </div>

      <div class="control-group">
        <label class="control-label">Operaciones a aplicar</label>
        <div class="op-list">
          <label class="op-item">
            <input type="checkbox" id="opBlur" checked />
            <span class="op-checkmark"></span>
            <span class="op-name">Blur</span>
            <span class="op-badge blur">filtro</span>
          </label>
          <label class="op-item">
            <input type="checkbox" id="opGrises" checked />
            <span class="op-checkmark"></span>
            <span class="op-name">Escala de Grises</span>
            <span class="op-badge grises">color</span>
          </label>
          <label class="op-item">
            <input type="checkbox" id="opResize" checked />
            <span class="op-checkmark"></span>
            <span class="op-name">Redimensionar</span>
            <span class="op-badge resize">batch</span>
          </label>
          <label class="op-item">
            <input type="checkbox" id="opSharpen" />
            <span class="op-checkmark"></span>
            <span class="op-name">Sharpen</span>
            <span class="op-badge sharpen">filtro</span>
          </label>
          <label class="op-item">
            <input type="checkbox" id="opContorno" />
            <span class="op-checkmark"></span>
            <span class="op-name">Contornos</span>
            <span class="op-badge contorno">analisis</span>
          </label>
        </div>
      </div>

      <div class="btn-group">
        <button class="btn btn-start" id="btnStart">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          Iniciar Procesamiento
        </button>
        <button class="btn btn-stop" id="btnStop" disabled>
          <svg viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="6" width="12" height="12" rx="1"/></svg>
          Detener
        </button>
      </div>
    </div>

  </aside>

  <!-- AREA PRINCIPAL -->
  <div class="main-area">

    <!-- Metricas -->
    <div class="metrics-row">
      <div class="metric-card green">
        <div class="metric-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        </div>
        <div class="metric-body">
          <div class="m-label">Speedup</div>
          <div class="m-value" id="mSpeedup">&#8212;</div>
          <div class="m-sub">vs. proceso secuencial</div>
        </div>
      </div>
      <div class="metric-card blue">
        <div class="metric-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        </div>
        <div class="metric-body">
          <div class="m-label">Eficiencia</div>
          <div class="m-value" id="mEfficiency">&#8212;</div>
          <div class="m-sub">uso promedio de nucleos</div>
        </div>
      </div>
      <div class="metric-card orange">
        <div class="metric-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        </div>
        <div class="metric-body">
          <div class="m-label">Tiempo Total</div>
          <div class="m-value" id="mTime">&#8212;</div>
          <div class="m-sub">segundos de ejecucion</div>
        </div>
      </div>
      <div class="metric-card purple">
        <div class="metric-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
        </div>
        <div class="metric-body">
          <div class="m-label">Imagenes</div>
          <div class="m-value" id="mImages">0 / 0</div>
          <div class="m-sub">procesadas con exito</div>
        </div>
      </div>
    </div>

    <!-- Progreso -->
    <div class="panel">
      <div class="panel-title">
        <svg class="panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="10" rx="2"/></svg>
        Progreso
        <span class="panel-title-spacer"></span>
        <span class="progress-counter-badge" id="progressCounter">0 / 0</span>
      </div>
      <div class="progress-section">
        <div class="progress-bar-track">
          <div class="progress-bar-fill" id="progressBar"></div>
        </div>
        <div class="progress-footer">
          <span class="progress-label" id="progressLabel">En espera...</span>
          <span class="progress-file" id="progressFile">Ningun archivo activo</span>
        </div>
      </div>
    </div>

    <!-- CPU por Nucleo -->
    <div class="panel">
      <div class="panel-title">
        <svg class="panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M9 1v3M15 1v3M9 20v3M15 20v3M1 9h3M1 15h3M20 9h3M20 15h3"/></svg>
        Uso de CPU por Nucleo
      </div>
      <div class="cpu-grid" id="cpuGrid">
        <div class="cpu-placeholder">
          Conectando al servidor&#8230;
        </div>
      </div>
    </div>

    <!-- Resultados + Logs -->
    <div class="bottom-area">

      <div class="panel panel-table">
        <div class="panel-title">
          <svg class="panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
          Resultados por Imagen
        </div>
        <div class="results-scroll">
          <table class="results-table">
            <thead>
              <tr>
                <th>Archivo</th>
                <th>Operaciones</th>
                <th>Antes</th>
                <th>Despues</th>
                <th>Tiempo</th>
                <th>Worker</th>
              </tr>
            </thead>
            <tbody id="resultsBody">
              <tr class="empty-row">
                <td colspan="6">
                  <div class="empty-state">
                    Sin resultados &#8212; inicia el procesamiento
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="log-console">
        <div class="log-header">
          <div class="log-traffic-lights">
            <span class="tl tl-red"></span>
            <span class="tl tl-yellow"></span>
            <span class="tl tl-green"></span>
          </div>
          <span class="log-title">Terminal</span>
          <button class="log-clear" id="btnClearLog">Limpiar</button>
        </div>
        <div class="log-body" id="logBody">
          <div class="log-entry info">
            <span class="log-ts">--:--:--</span>
            <span class="log-msg">Esperando conexion con el servidor&#8230;</span>
          </div>
        </div>
      </div>

    </div>
  </div>

</div>

<footer>
  <span>N-Core Dashboard</span>
  <span class="footer-sep">&#183;</span>
  <span>Version 4.0</span>
  <span class="footer-sep">&#183;</span>
  <span>DAM-2</span>
  <span class="footer-sep">&#183;</span>
  <span>Programacion de Servicios y Procesos</span>
</footer>

<script src="app.js"></script>
</body>
</html>